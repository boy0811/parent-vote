{% extends "layout.html" %}
{% block title %}å³æ™‚ç›£ç¥¨{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>ğŸ“Š å³æ™‚ç›£ç¥¨ - {{ phase.name }}</h2>

  <div class="alert alert-info">æ¯ {{ refresh_seconds }} ç§’è‡ªå‹•åˆ·æ–°ä¸€æ¬¡</div>

  <style>
    .table th, .table td {
        text-align: center;
        vertical-align: middle;
    }
    .top-rank {
        background-color: #d1e7dd !important;
        font-weight: bold;
    }
  </style>

  <table class="table table-bordered table-striped">
    <thead class="table-light">
      <tr>
        <th>æ’å</th>
        <th>ç­ç´š</th>
        <th>å®¶é•·å§“å</th>
        <th>å¾—ç¥¨æ•¸</th>
      </tr>
    </thead>
    <tbody>
      {% for row in results %}
      <tr class="{% if loop.index <= 3 %}top-rank{% endif %}">
        <td>{{ loop.index }}</td>
        <td>{{ row[2] or '-' }}</td>  {# class_name #}
        <td>{{ row[3] or '-' }}</td>  {# parent_name #}
        <td>{{ row[4] }}</td>         {# vote_count #}
      </tr>
      {% else %}
      <tr>
        <td colspan="4" class="text-center">å°šç„¡æŠ•ç¥¨è³‡æ–™</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">â† è¿”å›ä¸»æ§å°</a>
</div>

<script>
  setTimeout(() => {
    window.location.reload();
  }, {{ refresh_seconds * 1000 }});
</script>
{% endblock %}
