{% extends "layout.html" %}

{% block content %}
<div class="container mt-5">
  <h2 class="mb-4 text-center">ğŸ‘¥ å¸³è™Ÿç®¡ç†</h2>

  <!-- åŠŸèƒ½åˆ— -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <button type="submit" form="delete-form" class="btn btn-danger"
              onclick="return confirm('ç¢ºå®šè¦åˆªé™¤é¸ä¸­çš„å¸³è™Ÿå—ï¼Ÿ')">ğŸ—‘ï¸ æ‰¹æ¬¡åˆªé™¤</button>
    </div>
    <div>
      <a href="{{ url_for('admin_users.add_user') }}" class="btn btn-primary me-2">â• æ–°å¢å¸³è™Ÿ</a>
      <a href="{{ url_for('admin_users.import_users') }}" class="btn btn-outline-info">ğŸ“¥ åŒ¯å…¥å¸³è™Ÿ</a>
    </div>
  </div>

  <!-- å¸³è™Ÿè¡¨æ ¼ -->
  <form method="POST" id="delete-form" action="{{ url_for('admin_users.delete_users') }}">
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle shadow-sm">
        <thead class="table-dark">
          <tr>
            <th scope="col" style="width:50px;"><input type="checkbox" id="select-all"></th>
            <th scope="col">å¸³è™Ÿ</th>
            <th scope="col" style="width:180px;">æ“ä½œ</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr>
            <td><input type="checkbox" name="user_ids" value="{{ user.id }}"></td>
            <td><span class="fw-bold text-primary">{{ user.username }}</span></td>
            <td>
              <a href="{{ url_for('admin_users.edit_user', user_id=user.id) }}" class="btn btn-sm btn-outline-primary me-1">âœï¸ ç·¨è¼¯</a>
              <a href="{{ url_for('admin_users.delete_user', user_id=user.id) }}" 
                 class="btn btn-sm btn-outline-danger"
                 onclick="return confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹å¸³è™Ÿå—ï¼Ÿ')">ğŸ—‘ï¸ åˆªé™¤</a>
            </td>
          </tr>
          {% else %}
          <tr>
            <td colspan="3" class="text-center text-muted">ç›®å‰æ²’æœ‰å¸³è™Ÿè³‡æ–™</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </form>
</div>

<script>
  // å…¨é¸ / å…¨ä¸é¸
  document.getElementById("select-all").addEventListener("click", function(e) {
    const checkboxes = document.querySelectorAll("input[name='user_ids']");
    checkboxes.forEach(cb => cb.checked = e.target.checked);
  });
</script>
{% endblock %}
